(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},139:function(e,t,n){"use strict";n.r(t);var a=n(8),r=n(0),c=n.n(r),i=n(65),o=n.n(i),l=n(6),u=n(7),s=n(5),m=n(10),p=n.n(m),d=n(16);function f(){var e=Object(a.a)(["\n    mutation ($username: String!, $password: String!) {\n        tokenAuth(username: $username, password: $password) {\n            token\n        }\n    }\n"]);return f=function(){return e},e}var v=Object(u.b)(f()),b=function(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(""),o=Object(s.a)(i,2),u=o[0],m=o[1],f=function(){var e=Object(d.a)(p.a.mark(function e(t,n,a){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n();case 3:r=e.sent,localStorage.setItem("reactAudioAuth",r.data.tokenAuth.token),a.writeData({data:{isLoggedIn:!0}});case 6:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}();return c.a.createElement(l.c,{mutation:v,variables:{username:n,password:u}},function(e,t){t.loading;var r=t.error,i=(t.called,t.client);return r&&console.log(r),c.a.createElement("form",{onSubmit:function(t){return f(t,e,i)}},c.a.createElement("input",{id:"username",value:n,onChange:function(e){return a(e.target.value)},type:"text",placeholder:"username"}),c.a.createElement("input",{type:"password",value:u,onChange:function(e){return m(e.target.value)},placeholder:"password"}),c.a.createElement("button",{type:"submit"},"Submit"))})};function g(){var e=Object(a.a)(["\n    mutation($username: String!, $password: String!, $email: String!) {\n        createUser(username: $username, password: $password, email: $email) {\n            user {\n                username\n                email\n            }\n        }\n    }\n"]);return g=function(){return e},e}var E=Object(u.b)(g()),h=function(e){var t=e.setLogin,n=Object(r.useState)(""),a=Object(s.a)(n,2),i=a[0],o=a[1],u=Object(r.useState)(""),m=Object(s.a)(u,2),f=m[0],v=m[1],b=Object(r.useState)(""),g=Object(s.a)(b,2),h=g[0],k=g[1];return c.a.createElement(l.c,{mutation:E,variables:{username:i,password:f,email:h},onCompleted:function(){return t(!0)}},function(e,t){t.data;var n=t.error;n&&console.log(n);var a=function(){var e=Object(d.a)(p.a.mark(function e(t,n){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n();case 3:a=e.sent,console.log(a.data);case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}();return c.a.createElement("form",{onSubmit:function(t){return a(t,e)}},c.a.createElement("input",{id:"username",value:i,onChange:function(e){return o(e.target.value)},type:"text",placeholder:"username"}),c.a.createElement("input",{id:"email",value:h,onChange:function(e){return k(e.target.value)},type:"email",placeholder:"email"}),c.a.createElement("input",{type:"password",value:f,onChange:function(e){return v(e.target.value)},placeholder:"password"}),c.a.createElement("button",{type:"submit"},"Submit"))})},k=n(32),S=n.n(k),j=function(){var e=Object(r.useState)(!0),t=Object(s.a)(e,2),n=t[0],a=t[1];return c.a.createElement("div",{className:"auth"},c.a.createElement("img",{src:S.a,alt:"logo"}),n?c.a.createElement(r.Fragment,null,c.a.createElement("h3",null,"Login"),c.a.createElement(b,null),c.a.createElement("button",{onClick:function(){return a(!1)}},"New User? Click Here!")):c.a.createElement(r.Fragment,null,c.a.createElement("h3",null,"Register"),c.a.createElement(h,{setLogin:a}),c.a.createElement("button",{onClick:function(){return a(!0)}},"Previous User? Click Here!")))},O=(n(100),n(101),n(71)),w=n(72),$=n(79),T=n(73),y=n(80),C=n(145),I=n(144),N=n(22),x=n.n(N),A=n(143),P=function(e){var t=e.currentUser;return c.a.createElement("nav",{className:"navbar"},c.a.createElement("div",{className:"left-part"},c.a.createElement(A.a,{to:"/"},c.a.createElement("img",{src:S.a,alt:"logo"})),c.a.createElement(A.a,{to:"/tracks"},"Tracks")),c.a.createElement("div",{className:"right-part"},c.a.createElement("img",{className:"profile-pic",src:t.profilePic,alt:"avatar"}),c.a.createElement(A.a,{to:"/profile/".concat(t.id)},c.a.createElement("span",{className:"username"},t.username)),c.a.createElement(l.a,null,function(e){return c.a.createElement("button",{onClick:function(){return function(e){localStorage.removeItem("reactAudioAuth"),e.writeData({data:{isLoggedIn:!1}})}(e)}},"Signout")})))};n(74);function G(){var e=Object(a.a)(["\n    mutation ($sharedTrackId: Int!) {\n        unshareTrack(sharedTrackId: $sharedTrackId) {\n            sharedTrackId\n        }\n    }\n"]);return G=function(){return e},e}Object(u.b)(G());function M(){var e=Object(a.a)(["\n    mutation ($trackId: Int!, $commentText: String!) {\n        commentTrack(trackId: $trackId, commentText: $commentText) {\n            comment {\n                user {id, username}\n                track {id, title}\n            }\n        }\n    }\n"]);return M=function(){return e},e}Object(u.b)(M());function D(){var e=Object(a.a)(["\n    mutation ($commentId: Int!) {\n        deleteComment(commentId: $commentId) {\n            commentId\n        }\n    }\n"]);return D=function(){return e},e}Object(u.b)(D());function F(){var e=Object(a.a)(["\n  {\n    shared {\n      id\n      track {\n        id\n        title\n        description\n        audioSrc\n        albumCoverSrc\n        albumTitle\n        artistTitle\n        genre\n        trackTimeMins\n        trackTimeSecs\n        trackNumber\n        likes {\n          id\n        }\n        comments {\n          id\n          user {id, username, profilePic}\n          track {title}\n          commentText\n        }\n      }\n      user {\n        username\n        profilePic\n        id\n      }\n      \n    }\n  }\n"]);return F=function(){return e},e}var L=Object(u.b)(F());function _(){var e=Object(a.a)(["\n    mutation ($trackId: Int!) {\n        shareTrack(trackId: $trackId) {\n            user {\n                username\n            }\n            track {\n                title\n            }\n        }\n    }\n"]);return _=function(){return e},e}var U=Object(u.b)(_()),q=function(e){var t=e.trackId;return c.a.createElement(l.c,{mutation:U,variables:{trackId:t},onCompleted:function(){return console.log("Track shared")},refetchQueries:function(){return[{query:L}]}},function(e,t){var n=t.loading,a=t.error;return n&&console.log("Loading the track"),a&&console.log(a),c.a.createElement("button",{onClick:e},"Share")})},z=function(e){var t=e.track;return c.a.createElement("div",{className:"track"},c.a.createElement("img",{src:t.albumCoverSrc,alt:"album-cover"}),c.a.createElement("div",{className:"track-info"},c.a.createElement("h3",null,t.title),c.a.createElement("p",{className:"genre"},t.genre),c.a.createElement("p",null,t.albumTitle,c.a.createElement("span",{className:"separator"},"-"),t.artistTitle),c.a.createElement(q,{trackId:t.id})))},J=function(e){var t=e.genre,n=e.selectedGenre,a=e.setGenre;return c.a.createElement("div",{className:"page-indicator",onClick:function(){return a(t)},style:t===n?{background:"#006989"}:null},c.a.createElement("span",{style:t===n?{color:"#EAEBED"}:null},t))},Y=function(e){var t=e.genres,n=e.selectedGenre,a=e.setGenre;return c.a.createElement("div",{className:"page-indicators selected"},t.map(function(e){return c.a.createElement(J,{key:e,genre:e,selectedGenre:n,setGenre:a})}))};function B(){var e=Object(a.a)(["\n  {\n    tracks {\n      id \n      title\n      albumTitle\n      artistTitle\n      albumCoverSrc\n      genre\n      trackTimeMins\n      trackTimeSecs\n    }\n  }\n"]);return B=function(){return e},e}var R=Object(u.b)(B()),W=function(){var e=Object(r.useState)("All"),t=Object(s.a)(e,2),n=t[0],a=t[1];return c.a.createElement(l.d,{query:R},function(e){var t=e.data,r=e.loading,i=e.error;if(r)return c.a.createElement("h3",null,"Loading");i&&console.log(i),console.log(t.tracks);var o,l=t.tracks;return o="All"!==n?l.filter(function(e){return e.genre===n}):l,c.a.createElement("div",{className:"tracks"},o.map(function(e){return c.a.createElement(z,{key:e.id,track:e})}),c.a.createElement(Y,{genres:["All","Pop","EDM","Video Game"],selectedGenre:n,setGenre:a}))})},H=n(146),Q=n(75),V=n.n(Q),K=function(e){var t=e.profile;return c.a.createElement("div",{className:"profile-column prof-basic-info"},c.a.createElement("img",{src:t.profilePic,alt:"avatar"}),c.a.createElement("h3",null,t.username),c.a.createElement("span",null,"Joined: "),V()(t.dateJoined,"Do MMM YYYY"))},X=n(25),Z=n.n(X);function ee(){var e=Object(a.a)(["\n  mutation($userId: Int!, $profilePic: String, $favSong: String, $favArtist: String, $favGenre: String, $description: String ) {\n    editProfile(userId: $userId, profilePic: $profilePic, favSong: $favSong, favArtist: $favArtist, favGenre: $favGenre, description: $description) {\n      user {\n        id\n        profilePic\n        favSong\n        favArtist\n        favGenre\n        description\n      }      \n    }\n  }\n"]);return ee=function(){return e},e}var te=Object(u.b)(ee()),ne=function(e){var t=e.toggleEditProfile,n=e.profile,a=Object(r.useState)(n.profilePic),i=Object(s.a)(a,2),o=i[0],u=i[1],m=Object(r.useState)(n.profilePic),f=Object(s.a)(m,2),v=f[0],b=f[1],g=Object(r.useState)(n.favSong),E=Object(s.a)(g,2),h=E[0],k=E[1],S=Object(r.useState)(n.favArtist),j=Object(s.a)(S,2),O=j[0],w=j[1],$=Object(r.useState)(n.favGenre),T=Object(s.a)($,2),y=T[0],C=T[1],I=Object(r.useState)(n.description),N=Object(s.a)(I,2),A=N[0],P=N[1],G=function(e){var t=e.target.files[0];t&&t.size>1e7?console.log("File too large"):(u(t),b(URL.createObjectURL(e.target.files[0])))},M=function(){var e=Object(d.a)(p.a.mark(function e(){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new FormData).append("file",o),t.append("resource_type","raw"),t.append("upload_preset","react-tracks"),t.append("cloud_name","jhm-cloudi"),e.next=8,Z.a.post("https://api.cloudinary.com/v1_1/jhm-cloudi/raw/upload",t);case 8:return n=e.sent,e.abrupt("return",n.data.url);case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(d.a)(p.a.mark(function e(t,a){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,M();case 3:r=e.sent,a({variables:{userId:n.id,profilePic:r,favSong:h,favArtist:O,favGenre:y,description:A}});case 5:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"edit-profile-modal-background",onClick:function(e){return function(e){"edit-profile-modal-background"===e.target.className?t(!1):"cancel-btn"===e.target.className?t(!1):t(!0)}(e)}},c.a.createElement("div",{className:"edit-profile-modal"},c.a.createElement(l.c,{mutation:te,onCompleted:function(){return t(!1)}},function(e,t){var n=t.loading,a=t.error;return n?c.a.createElement(x.a,{type:"bars",color:"#006989",className:"loading"}):(a&&console.log(a),c.a.createElement("form",{className:"edit-profile-form",onSubmit:function(t){return D(t,e)}},null!==v?c.a.createElement("img",{src:v,alt:"avatar"}):c.a.createElement("div",{className:"profile-pic-placeholder"}),c.a.createElement("input",{type:"file",id:"profilePic",onChange:G,accept:"image/*"}),c.a.createElement("input",{type:"text",id:"favSong",value:h,onChange:function(e){return k(e.target.value)},placeholder:"Favorite Song"}),c.a.createElement("input",{type:"text",id:"favArtist",value:O,onChange:function(e){return w(e.target.value)},placeholder:"Favorite Artist"}),c.a.createElement("input",{type:"text",id:"favGenre",value:y,onChange:function(e){return C(e.target.value)},placeholder:"Favorite Genre"}),c.a.createElement("textarea",{id:"description",value:A,onChange:function(e){return P(e.target.value)},cols:"30",rows:"5",placeholder:"Description"}),c.a.createElement("div",{className:"buttons"},c.a.createElement("button",{type:"submit"},"Save"),c.a.createElement("button",{className:"cancel-btn"},"Cancel"))))})))},ae=function(e){var t=e.profile,n=e.profileId,a=e.currentUserId,i=Object(r.useState)(!1),o=Object(s.a)(i,2),l=o[0],u=o[1];return c.a.createElement("div",{className:"profile-column"},c.a.createElement("span",{className:"profile-title"},"Favorite Song: "),c.a.createElement("p",null,t.favSong),c.a.createElement("span",{className:"profile-title"},"Favorite Artist: "),c.a.createElement("p",null,t.favArtist),c.a.createElement("span",{className:"profile-title"},"Favorite Genre:"),c.a.createElement("p",null,t.favGenre),c.a.createElement("span",{className:"profile-title description"},"Description: "),c.a.createElement("p",null,t.description),a===n?c.a.createElement("button",{onClick:function(){return u(!0)}},"Edit Profile"):null,l&&c.a.createElement(ne,{toggleEditProfile:u,profile:t}))};function re(){var e=Object(a.a)(["\n    query ($id: Int!) {\n        user (id: $id) {\n            id\n            username\n            dateJoined\n            profilePic\n            favSong\n            favArtist\n            favGenre\n            description\n        }\n    }\n"]);return re=function(){return e},e}var ce=Object(u.b)(re()),ie=Object(H.a)(function(e){var t=e.match,n=e.currentUser,a=t.params.id;return c.a.createElement(l.d,{query:ce,variables:{id:a}},function(e){var t=e.data,r=e.loading,i=e.error;return r?c.a.createElement("h3",null,"Loading"):(i&&console.log(i),c.a.createElement("div",{className:"profile"},c.a.createElement("div",{className:"profile-wrapper"},c.a.createElement(K,{profile:t.user}),c.a.createElement(ae,{currentUserId:n.id,profileId:a,profile:t.user}))))})}),oe=n(78);function le(){var e=Object(a.a)(["\nmutation ($title: String!, $albumTitle: String!, $genre: String!, $artistTitle: String!, $description: String!, $audioSrc: String!, $albumCoverSrc: String!, $trackTimeMins: Int, $trackTimeSecs: Int, $trackNumber: Int){\n    createTrack(\n      title: $title,\n      albumTitle: $albumTitle,\n      artistTitle: $artistTitle,\n      genre: $genre,\n      description: $description,\n      audioSrc: $audioSrc,\n      albumCoverSrc: $albumCoverSrc,\n      trackTimeMins: $trackTimeMins,\n      trackTimeSecs: $trackTimeSecs,\n      trackNumber: $trackNumber\n    ) {\n      track {id,title, albumTitle, description, audioSrc, albumCoverSrc, trackTimeMins, trackTimeSecs}\n    }\n  }\n"]);return le=function(){return e},e}var ue=Object(u.b)(le()),se=function(e){Object(oe.a)(e);var t=Object(r.useState)(""),n=Object(s.a)(t,2),a=n[0],i=n[1],o=Object(r.useState)(""),u=Object(s.a)(o,2),m=u[0],f=u[1],v=Object(r.useState)(""),b=Object(s.a)(v,2),g=b[0],E=b[1],h=Object(r.useState)(""),k=Object(s.a)(h,2),S=k[0],j=k[1],O=Object(r.useState)(""),w=Object(s.a)(O,2),$=w[0],T=w[1],y=Object(r.useState)(""),C=Object(s.a)(y,2),I=C[0],N=C[1],x=Object(r.useState)(""),A=Object(s.a)(x,2),P=A[0],G=A[1],M=Object(r.useState)(""),D=Object(s.a)(M,2),F=D[0],L=D[1],_=Object(r.useState)(""),U=Object(s.a)(_,2),q=U[0],z=U[1],J=Object(r.useState)(""),Y=Object(s.a)(J,2),B=Y[0],R=Y[1],W=function(e){var t=e.target.files[0];t&&t.size>1e7?console.log("File size too large"):N(t)},H=function(e){var t=e.target.files[0];t&&t.size>1e7?console.log("File size too large"):G(t)},Q=function(){var e=Object(d.a)(p.a.mark(function e(){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new FormData).append("file",I),t.append("resource_type","raw"),t.append("upload_preset","react-tracks"),t.append("cloud_name","jhm-cloudi"),e.next=8,Z.a.post("https://api.cloudinary.com/v1_1/jhm-cloudi/raw/upload",t);case 8:return n=e.sent,console.log(n,"Audio file"),e.abrupt("return",n.data.url);case 13:e.prev=13,e.t0=e.catch(0),console.error("Error uploading file",e.t0);case 16:case"end":return e.stop()}},e,null,[[0,13]])}));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(d.a)(p.a.mark(function e(){var t,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new FormData).append("file",P),t.append("resource_type","raw"),t.append("upload_preset","react-tracks"),t.append("cloud_name","jhm-cloudi"),e.next=8,Z.a.post("https://api.cloudinary.com/v1_1/jhm-cloudi/raw/upload",t);case 8:return n=e.sent,console.log(n,"Img file"),e.abrupt("return",n.data.url);case 13:e.prev=13,e.t0=e.catch(0),console.error("Error uploading file",e.t0);case 16:case"end":return e.stop()}},e,null,[[0,13]])}));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(d.a)(p.a.mark(function e(t,n){var r,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Q();case 3:return r=e.sent,e.next=6,V();case 6:c=e.sent,n({variables:{title:a,albumTitle:m,genre:$,artistTitle:g,description:S,audioSrc:r,albumCoverSrc:c,trackTimeMins:F,trackTimeSecs:q,trackNumber:B}});case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}();return c.a.createElement(l.c,{mutation:ue,onCompleted:function(){return console.log("Mutation complete")}},function(e,t){var n=t.loading,r=t.error;return n?c.a.createElement("h3",null,"Loading"):(r&&console.log(r),c.a.createElement("form",{className:"upload",onSubmit:function(t){return K(t,e)}},c.a.createElement("input",{id:"title",type:"text",value:a,onChange:function(e){return i(e.target.value)},placeholder:"title"}),c.a.createElement("input",{id:"albumTitle",type:"text",value:m,onChange:function(e){return f(e.target.value)},placeholder:"albumTitle"}),c.a.createElement("input",{id:"artistTitle",type:"text",value:g,onChange:function(e){return E(e.target.value)},placeholder:"artistTitle"}),c.a.createElement("textarea",{name:"description",id:"description",cols:"30",rows:"10",value:S,onChange:function(e){return j(e.target.value)},placeholder:"description"}),c.a.createElement("input",{type:"text",id:"genre",value:$,onChange:function(e){return T(e.target.value)},placeholder:"genre"}),c.a.createElement("input",{type:"file",name:"audioSrc",id:"audioSrc",onChange:W,placeholder:"audioSrc"}),c.a.createElement("input",{type:"file",name:"albumCoverSrc",id:"albumCoverSrc",onChange:H,placeholder:"albumCoverSrc"}),c.a.createElement("input",{type:"number",name:"trackTimeMins",id:"trackTimeMins",value:F,onChange:function(e){return L(e.target.value)},placeholder:"trackTimeMins"}),c.a.createElement("input",{type:"number",name:"trackTimeSecs",id:"trackTimeSecs",value:q,onChange:function(e){return z(e.target.value)},placeholder:"trackTimeSecs"}),c.a.createElement("input",{type:"number",name:"trackNumber",id:"trackNumber",value:B,onChange:function(e){return R(e.target.value)},placeholder:"trackNumber"}),c.a.createElement("button",{type:"submit"},"Submit")))})};function me(){var e=Object(a.a)(["\n  {\n    me {\n      id\n      username\n      email\n      profilePic\n\n      likeSet {\n        track {\n          id\n        }\n      }\n    }\n  }\n"]);return me=function(){return e},e}var pe=c.a.createContext(),de=function(e){function t(){return Object(O.a)(this,t),Object($.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return c.a.createElement(l.d,{query:fe,fetchPolicy:"cache-and-network"},function(e){var t=e.data,n=e.loading,a=e.error;if(n)return c.a.createElement(x.a,{type:"bars",color:"#006989",className:"loading"});a&&console.log(a);var r=t.me;return c.a.createElement(C.a,null,c.a.createElement(pe.Provider,{value:r},c.a.createElement(P,{currentUser:r}),c.a.createElement(I.a,{exact:!0,path:"/",component:se}),c.a.createElement(I.a,{exact:!0,path:"/tracks",component:W}),c.a.createElement(I.a,{exact:!0,path:"/profile/:id",render:function(){return c.a.createElement(ie,{currentUser:r})}})))})}}]),t}(r.Component),fe=Object(u.b)(me()),ve=de;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function be(){var e=Object(a.a)(["\n    query {\n        isLoggedIn @client\n    }\n"]);return be=function(){return e},e}var ge=new u.a({uri:"https://raudio2-jhm.herokuapp.com/graphql/",fetchOptions:{credentials:"include"},request:function(e){var t=localStorage.getItem("reactAudioAuth")||"";e.setContext({headers:{Authorization:"JWT ".concat(t)}})},clientState:{defaults:{isLoggedIn:!!localStorage.getItem("reactAudioAuth")}}}),Ee=Object(u.b)(be());o.a.render(c.a.createElement(l.b,{client:ge},c.a.createElement(l.d,{query:Ee},function(e){return e.data.isLoggedIn?c.a.createElement(ve,null):c.a.createElement(j,null)})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},32:function(e,t,n){e.exports=n.p+"static/media/logo.97da0d85.png"},82:function(e,t,n){e.exports=n(139)}},[[82,1,2]]]);
//# sourceMappingURL=main.385425af.chunk.js.map